# Elastic Load Balancing

## Intro

* Elastic Load Balancing, ELB는 네트워크 트래픽을 여러 가용영역에 배포한다.
* 트래픽 배포 대상은 EC2 인스턴스, 컨테이너, IP 주소 등이 포함된다.
* 트래픽의 변화에 따라 로드밸런서를 확장/축소할 수 있다.

## 장점

* 가용성
  * 여러 가용역역에 있는 컴퓨팅 리소스에 트래픽을 분산시킴
  * 정상 상태의 리소스에만 트래픽을 수신하도록 함
    * 리소스가 응답 불가능한 상태인 경우, 네트워크 트래픽 배포 대상에서 제외한다.
  * 리전에 걸친 로드 배ㅔㄹ런싱 가능
  * 99.99% 가용성 보장
* 보안
  * VPC와 연동
  * 인증서 관리, 사용자 인증, SSL/TLS 복호화 등의 보안기능 제공
  * 컴퓨팅 리소스가 주요 작업에 집중할 수 있도록 암복호화 작업을 로드밸런서로 떠넘길 수 있다.
* 탄력성
  * 네트워크 트래픽 변화에 빠르개 대처 가능ㄴ
  * Auto Scaling 통합해서 자동으로 애플리케이션 리소스 확보
  * 컴퓨팅 리소스의 추가/제거가 자유롭다. 
* 유연성
  * IP 주소를 사용해서 라우팅 할 수 있음
  * 동일 인스턴스에서 많은 애플리케이션을 호스팅 할 수 있음
* 모니터링
  * CloudWatch를 통해 애플리케이션 성능을 실시간으로 모니터링 가능
* 하이브리드 로드 밸런싱
  * AWS와 온 프레미스 리소스에 로드밸런싱 할 수 있음

## Q&A

### ELB의 종류와 적용 케이스

* Application Load Balancer
  * HTTP/S 트래픽 로드밸런싱에 적합
  * 7 계층(Application layer)에서 작동
* Network Load Balancer
  * TCP/TLS 트래픽의 로드 밸런싱에 적합
  * 4 계층(Transport layer)에서 작동
  * 고도의 성능이 요구되거나 지연시간이 낮아야 하는 애플리케이션에서 사용
* Classic Load Balancer
  * EC2-Classic 네트워크 내에 구축된 애플리케이션을 대상으로 함 (레거시?)

### 퍼블릭 IP를 사용하지 않고 ELB API 액세스

* VPC 엔드포인트를 생성하여 ELB API에 비공개로 액세스 가능

### ALB

* 지원 운영체제? -> EC2 서비스가 지원하는 모든 운영체제
* 지원 프로토콜? -> HTTP/HTTPS
* HTTP/2 지원
* 웹소켓 지원
* 요청 추적기능 활성화
* ALB 트래픽만 허용하도록 EC2 인스턴스 구성 가능
* ALB 앞단의 보안그룹 구성 가능
* Classic Load Balancer API를 ALB에 사용 불가
* 로드밸런서 유형은 전환 불가
* Classic Load Balancer -> ALB 마이그레이션 가능
* 4 계층 기능이 필요하다면 NLB를 사용해야 함
* 단일 ALB로 HTTP(80 포트) 및 HTTPS(443 포트) 에 대한 요청 처리 가능
* ALB API 호출 기록을 얻으려면 CloudTrail을 사용하면 됨
* `HTTPS 종료`를 이용하려면 SSL 인증서를 로드밸런서에 설치해야 함
* SSL 인증서를 받으려면 Certificate Manager를 이용해서 프로비저닝 가능
* Certificate Manager와 통합되어, 간단하게 로드밸런서에 인증서를 연결할 수 있음
  * 인증서 구매, 업로드 및 갱신 프로세스가 자동화 됨
* SNI(서버 이름 표시)는 하나 이상의 인증서를 동일 리스너에 연결하면 자동으로 활성화 됨
  * 반대로 하나의 인증서만 연결한 경우 자동으로 비활성화 됨
* 동일 도메인용 인증서 여러개를 보안 리스너에 연결 가능
* ALB는 IPv6을 지원함
