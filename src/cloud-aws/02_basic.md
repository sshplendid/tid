# AWS 기초 서비스

## EC2

* 특징
  * 종량 과금제: 인스턴스 사용 시간만큼 비용 지불
  * HW/SW 선택의 자유: 원하는 OS, 원하는 스토리지 선택
  * Amazon Machine Image: Windows, Ubuntu, RHEL 등 제공하는 이미지 선택 가능
  * 필요할 때만 사용: 서버를 **인스턴스**로 사용
* 인스턴스 유형
  * 범용(T2, M5, M4): 트래픽이 적은 웹 서버 및 소형 DB
  * 컴퓨팅 최적화(C5, C4): 비디오 인코딩
  * 메모리 최적화(X1e, X1, R4): 고성능 DB, 하둡/Spark
  * 스토리지 최적화(H1, I3, D2): DW, 로그/데이터 처리 애플리케이션
  * 가속 컴퓨팅(P3, P2, G3, F1): ML, 3D App 스트리밍
* 요금
  * 단위
    * 초 단위 결제: Amazon Linux, Ubuntu
    * 시간 단위: 그 외 OS
  * 인스턴스 종류
    * 온디맨드: 일반 인스턴스
    * 예약 인스턴스
    * 스팟 인스턴스
      * 사용되지 않는 인스턴스
      * 언제든 사라질 수 있음
      * 온디맨드 대비 최대 90% 비용 절감 가능

## ELB

* 특징
  * 트래픽을 여러 AZ / 여러 EC2 인스턴스로 분산
  * EC2 상태확인 기능 지원
  * EC2 인스턴스에 대한 트래픽 라우팅 / LB 지원
  * 상태확인: EC2 가용성 확인을 위해 주기적으로 Ping(상태확인)을 보냄
    * 인스턴스 비정상이 확인되면 해당 인스턴스로의 라우팅을 중단
  * 고정세션
    * 로드밸런서가 사용자의 세션을 특정 서버에 바인딩
    * 단점
      * 애플리케이션으니 확장을 제한
      * 서버 전체에서의 불균등한 로드
      * 단일 사용자의 로드가 서버에 균등하게 분배하지 않기때문에 사용자 응답지연 가능성
  * 고정세션 대신 캐시를 사용하자
    * 세션정보를 외부 캐시서버(EleastiCache/DynamoDB)로 빼자

## Auto Scaling

* 특징
  * 애플리케이션 처리를 위한 EC2 인스턴스 수를 적절하게 유지
  * 사용자 정의 조건(ex: CPU 사용률 80%)에 따라 인스턴스 수를 조정
  * 조정 타입
    * 수동 조정: 최대/최소 및 원하는 용량 설정
    * 예약 조정: 예측가능한 이벤트에 따라 AS 발생 시간을 지정
    * 동적 조정: 성능 측정 임계값을 기반으로 조정
